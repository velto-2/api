# Call Flow Explanation - Who Calls Whom?

## ğŸ¯ Purpose of the System

**Velto** is a **voice agent testing platform** for people who **build voice agents** (IVR systems, voice bots, conversational AI, etc.). Instead of manually testing their voice agents with human callers, developers can use Velto to automatically test their voice agents with **AI-powered test callers** (digital humans).

---

## ğŸ“ The Call Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YOUR SYSTEM (Velto)                      â”‚
â”‚                    Testing Platform                         â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Digital Human (AI Test Caller)               â”‚   â”‚
â”‚  â”‚  - Simulates a customer calling                      â”‚   â”‚
â”‚  â”‚  - Speaks Arabic naturally                          â”‚   â”‚
â”‚  â”‚  - Acts like a real customer                        â”‚   â”‚
â”‚  â”‚  - Generated by Cloudflare AI (LLaMA 3.1)           â”‚   â”‚
â”‚  â”‚  - Tests the voice agent's responses                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â”‚ Calls via Twilio                 â”‚
â”‚                          â–¼                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ Phone Call
                          â”‚ (via Twilio)
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              VOICE AGENT (Being Tested)                     â”‚
â”‚              Built by your customers                        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Voice Agent Endpoint (agentEndpoint)                â”‚   â”‚
â”‚  â”‚  - This is the VOICE AGENT being tested               â”‚   â”‚
â”‚  â”‚  - Can be:                                            â”‚   â”‚
â”‚  â”‚    â€¢ IVR system phone number                          â”‚   â”‚
â”‚  â”‚    â€¢ Voice bot phone number                           â”‚   â”‚
â”‚  â”‚    â€¢ Conversational AI system                        â”‚   â”‚
â”‚  â”‚    â€¢ Any voice agent your customers built            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  The voice agent answers and talks to the AI test caller    â”‚
â”‚  Agent's responses are recorded and evaluated               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ Who is Who?

### 1. **Digital Human** (AI Test Caller)
- **Role**: Acts as a test caller (simulates a customer)
- **Technology**: AI-powered (Cloudflare LLaMA 3.1)
- **Speaks**: Arabic (or any configured language)
- **Purpose**: Automatically tests voice agents by simulating realistic customer conversations
- **Location**: Your Velto backend server
- **Who controls it**: You (the Velto platform)

### 2. **Voice Agent** (System Being Tested)
- **Role**: The voice agent that your customers built
- **Technology**: IVR system, voice bot, conversational AI, etc.
- **Speaks**: Whatever language it's configured for
- **Purpose**: The voice agent system being tested and evaluated
- **Location**: Anywhere (phone number/endpoint your customers provide)
- **Who controls it**: Your customers (voice agent developers)

---

## ğŸ”„ What Happens During a Test

1. **Your customer (voice agent developer) creates a test configuration**:
   - Sets the **voice agent endpoint** (`agentEndpoint`) - this is the voice agent being tested
   - Configures the digital human's persona (e.g., "frustrated customer")
   - Sets the scenario (e.g., "booking a doctor appointment")

2. **Test is executed**:
   - Velto creates a **Digital Human** instance (AI test caller)
   - Digital Human generates what to say (using AI)
   - Velto calls the **voice agent endpoint** via Twilio

3. **During the call**:
   - Digital Human speaks first (via TTS â†’ audio â†’ Twilio)
   - Voice Agent responds (the voice agent system processes and responds)
   - Voice Agent's response is recorded by Twilio
   - Recording is transcribed (STT)
   - Digital Human generates next response based on voice agent's reply
   - This repeats for multiple turns (conversation)

4. **After the call**:
   - All transcripts are saved
   - System evaluates the voice agent's performance
   - Results are displayed in the dashboard

---

## ğŸ’¡ Common Use Cases

### Use Case 1: Testing Voice Agents During Development
```
Digital Human (AI Test Caller) â†’ Calls â†’ Voice Agent (in development)
```
- Automatically test voice agents during development
- No need for manual human testers
- Run tests 24/7 without human intervention
- Catch issues before deployment

### Use Case 2: Regression Testing
```
Digital Human (AI Test Caller) â†’ Calls â†’ Voice Agent (after updates)
```
- Test voice agents after code changes
- Ensure updates don't break existing functionality
- Automated quality assurance

### Use Case 3: Performance Testing
```
Digital Human (AI Test Caller) â†’ Calls â†’ Voice Agent (load testing)
```
- Test voice agent performance under load
- Measure response times and latency
- Identify bottlenecks

### Use Case 4: Scenario Testing
```
Digital Human (AI Test Caller) â†’ Calls â†’ Voice Agent (specific scenarios)
```
- Test specific customer scenarios
- Verify voice agent handles edge cases
- Validate business logic

---

## âš™ï¸ Configuration: `agentEndpoint`

The `agentEndpoint` in the test configuration is **the phone number or endpoint of the voice agent being tested**.

### Examples:

**Example 1: IVR System**
```json
{
  "agentEndpoint": "+1-800-555-0123",  // IVR system phone number
  "agentType": "phone"
}
```

**Example 2: Voice Bot**
```json
{
  "agentEndpoint": "+201224941368",  // Voice bot phone number
  "agentType": "phone"
}
```

**Example 3: Development/Testing**
```json
{
  "agentEndpoint": "+1234567890",  // Test voice agent endpoint
  "agentType": "phone"
}
```

**Example 4: SIP Endpoint (Future)**
```json
{
  "agentEndpoint": "sip:agent@example.com",  // SIP endpoint
  "agentType": "sip"
}
```

---

## ğŸ­ Current Setup (Your Case)

Right now, you're using:
- **Digital Human**: AI test caller (speaking Arabic)
- **Voice Agent Endpoint**: Your personal phone number (`+201224941368`)

**This means**: The AI test caller is calling your phone, and you're manually testing the system by acting as a voice agent.

**For production**, your customers would set `agentEndpoint` to:
- Their IVR system phone number
- Their voice bot phone number
- Their conversational AI endpoint
- Any voice agent they want to test

---

## âœ… Yes, You Can Test Any Voice Agent!

The system is **voice agent-agnostic**. You can test:

1. **Phone-Based Voice Agents** (current implementation)
   - IVR systems
   - Voice bots
   - Any phone number that accepts calls

2. **SIP Endpoints** (future)
   - VoIP-based voice agents
   - SIP trunks

3. **Webhook-Based Agents** (future)
   - API-based voice agents
   - Webhook-driven systems

4. **Any Voice Agent Platform**
   - Twilio Flex voice agents
   - Custom voice agents
   - Any system that accepts phone calls and responds

---

## ğŸš€ Next Steps

1. **For Testing**: Keep using your personal phone number (after verifying it in Twilio)
2. **For Production**: Change `agentEndpoint` to the real agent/call center you want to test
3. **For Different Platforms**: The system supports different `agentType` values (phone, sip, webhook)

---

## ğŸ“ Summary

- **Digital Human** = AI test caller (simulates a customer, calls out)
- **Voice Agent** = The voice agent system being tested (receives call)
- **agentEndpoint** = Phone number/endpoint of the voice agent being tested
- **You can test any voice agent** - IVR systems, voice bots, conversational AI, etc.
- **The system is designed to automatically test voice agents** built by your customers, replacing manual human testers

---

## â“ Still Confused?

Think of it this way:
- **Velto** = The automated testing platform
- **Digital Human** = The AI test caller (replaces human testers)
- **Voice Agent** = The voice agent system being tested (what your customers built)

**The value proposition**: Instead of hiring people to manually call and test voice agents, developers can use Velto to automatically test their voice agents 24/7 with AI-powered test callers.

